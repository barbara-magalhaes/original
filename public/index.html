<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="utf-8" />
    <link rel="manifest" href="/manifest.json" />
    <link rel="icon" href="/favicon.ico" sizes="any">
    <link rel="icon" href="/favicon.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1"
    />

    <style>
      @font-face {
        font-family: 'pelando-icons';
        src: url('/fonts/pelando-icons.eot?5e0123a1d90b4bbb09b41ea0cb5e0ccf#iefix')
            format('embedded-opentype'),
          url('/fonts/pelando-icons.woff2?5e0123a1d90b4bbb09b41ea0cb5e0ccf')
            format('woff2'),
          url('/fonts/pelando-icons.woff?5e0123a1d90b4bbb09b41ea0cb5e0ccf')
            format('woff'),
          url('/fonts/pelando-icons.svg?5e0123a1d90b4bbb09b41ea0cb5e0ccf#pelando-icons')
            format('svg'),
          url('/fonts/pelando-icons.ttf?5e0123a1d90b4bbb09b41ea0cb5e0ccf')
            format('truetype');
      }

      @font-face {
        font-family: 'Nunito Sans';
        font-style: normal;
        font-weight: 400;
        font-display: swap;
        src: url(/fonts/nunitosans-400.woff2) format('woff2');
        unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6,
          U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193,
          U+2212, U+2215, U+FEFF, U+FFFD;
      }

      @font-face {
        font-family: 'Nunito Sans';
        font-style: normal;
        font-weight: 700;
        font-display: swap;
        src: url(/fonts/nunitosans-700.woff2) format('woff2');
        unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6,
          U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193,
          U+2212, U+2215, U+FEFF, U+FFFD;
      }
    </style>
    <meta name="apple-itunes-app" content="app-id=1045614200">
    <script>
      (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        (i[r] =
          i[r] ||
          function () {
            (i[r].q = i[r].q || []).push(arguments);
          }),
          (i[r].l = 1 * new Date());
        (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m);
      })(
        window,
        document,
        'script',
        'https://www.google-analytics.com/analytics.js',
        'ga'
      );

      const trackingCodeMap = { 'ios': 'REACT_APP_GA_TRACKING_CODE_IOS', 'android': 'REACT_APP_GA_TRACKING_CODE_ANDROID', web: 'REACT_APP_GA_TRACKING_CODE_WEB' };
      const url = new URL(window.location.href);
      const env = url.searchParams.get('_pappOs') || 'web';

      ga('create', trackingCodeMap[env], 'auto');

      if(window.STARTED_ON_FEED) {
        ga('send', {
          'hitType': 'pageview',
          'page': `${url.pathname}${url.search}${url.hash}`
        });
      } else {
        ga('send', 'pageview');
      }
    </script>
    <script>
      window.dataLayer = window.dataLayer || [];
      window.googletag = window.googletag || { cmd: [] };
      window.googletag.cmd.push(function () {
        window.googletag.pubads().enableSingleRequest();
        window.googletag.pubads().setForceSafeFrame(true);
        window.googletag.enableServices();
      });
    </script>
  </head>
  <body>
    <script>
      // USER RELATED PREFERENCES
      (function () {
        const theme = window.localStorage.getItem('theme') || 'light';
        const oldToken = document.cookie.match(new RegExp('(^| )token=([^;]+)'));
        const token = document.cookie.match(new RegExp('(^| )probably_logged=([^;]+)'));

        function isLogged() {
          // persist old login
          if (Boolean(oldToken)) {
            document.cookie = 'probably_logged=true';
            return true;
          }

          return Boolean(token && token[2]);
        }

        // GET USER THEME
        (function () {
          if (!isLogged()) {
            document.body.setAttribute('data-theme', 'LIGHT');
            return;
          }

          if (theme !== 'AUTO') {
            document.body.setAttribute('data-theme', theme);
            return;
          }

          const systemIsDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
          document.body.setAttribute('data-theme',systemIsDark ? 'DARK' : 'LIGHT');
        })();

        // GET USER AUTHENTICATION
        (function () {
          document.body.setAttribute('data-user-auth', isLogged().toString());
        })();
      })();
    </script>
    <div id="root"></div>
  </body>
</html>
